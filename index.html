<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ExpenseMate</title>

  <link rel="icon" href="icon.png" type="image/png">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#4a90e2">

  <style>
    :root {
      --primary-color: #4a90e2;
      --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      --card-bg: #ffffff;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-gradient);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
    }

    .container {
      background: var(--card-bg);
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 420px;
      animation: fadeIn 0.8s ease-out;
    }

    h2 {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 1.5rem;
    }

    .form-group {
      margin-bottom: 1.2rem;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    input, select {
      width: 100%;
      padding: 12px;
      border: 2px solid #eee;
      border-radius: 8px;
      font-family: inherit;
    }

    .fade-slide {
      display: none;
      animation: slideDown 0.4s ease forwards;
    }

    button {
      width: 100%;
      padding: 12px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 10px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>

<div class="container">
  <h2>ðŸ’° ExpenseMate</h2>

  <form id="expenseForm">

    <div class="form-group">
      <label>Date</label>
      <input type="date" id="date" required>
    </div>

    <div class="form-group">
      <label>Transaction Type</label>
      <select id="type" onchange="toggleFields()" required>
        <option value="">Select Type</option>
        <option value="Given">Money Given</option>
        <option value="Spent">Money Spent</option>
      </select>
    </div>

    <!-- MONEY GIVEN -->
    <div id="givenFields" class="fade-slide">
      <div class="form-group">
        <label>Person Name</label>
        <input type="text" id="person">
      </div>
      <div class="form-group">
        <label>Reason</label>
        <input type="text" id="reasonGiven">
      </div>
    </div>

    <!-- MONEY SPENT -->
    <div id="spentFields" class="fade-slide">

      <div class="form-group">
        <label>Category</label>
        <select id="category" onchange="toggleSubCategory()">
          <option value="">Select Category</option>
          <option>Petrol / Diesel</option>
          <option>Home Food</option>
          <option>Relatives</option>
          <option>Farm Medicine</option>
          <option>Sick Medicine</option>
          <option>Cooking Gas</option>
          <option>Travelling</option>
          <option>Repairing</option>
          <option>Transporting Items</option>

          <!-- NEW CATEGORIES -->
          <option>Recharge</option>
          <option>Bills</option>
          <option>Other</option>

          <option value="buy_new">Buying Something New</option>
          <option value="building">Buying Something for Building</option>
        </select>
      </div>

      <!-- BUY NEW -->
      <div id="buyNewBox" class="fade-slide">
        <div class="form-group">
          <label>What did you buy?</label>
          <select id="buyNewType">
            <option value="">Select</option>
            <option>Electronic Product</option>
            <option>Vehicle</option>
            <option>Farm Electronics</option>
          </select>
        </div>
      </div>

      <!-- BUILDING -->
      <div id="buildingBox" class="fade-slide">
        <div class="form-group">
          <label>Building Material</label>
          <select id="buildingType">
            <option value="">Select</option>
            <option>Bricks</option>
            <option>Cement</option>
            <option>Sand</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label>Reason</label>
        <input type="text" id="reasonSpent">
      </div>

    </div>

    <div class="form-group">
      <label>Amount (â‚¹)</label>
      <input type="number" id="amount" required>
    </div>

    <button type="submit">Save Transaction</button>

  </form>
</div>

<script>
function toggleFields() {
  const type = document.getElementById("type").value;
  givenFields.style.display = type === "Given" ? "block" : "none";
  spentFields.style.display = type === "Spent" ? "block" : "none";
}

function toggleSubCategory() {
  const cat = category.value;
  buyNewBox.style.display = cat === "buy_new" ? "block" : "none";
  buildingBox.style.display = cat === "building" ? "block" : "none";
}

expenseForm.addEventListener("submit", function(e){
  e.preventDefault();

  const data = {
    type: type.value,
    person: person.value,
    category: category.value,
    subCategory: buyNewType.value || buildingType.value,
    reason: type.value === "Given" ? reasonGiven.value : reasonSpent.value,
    amount: amount.value,
    date: date.value
  };

  fetch("https://script.google.com/macros/s/AKfycbyn4GXY4WfpQ-Y5yUrSSfwwyQK9kJWez3j8hciYMD8t36wa3Na5AM-oYDSYXoNkr-Kh/exec", {
    method: "POST",
    mode: "no-cors",
    body: JSON.stringify(data)
  }).then(() => {
    alert("âœ… Transaction Saved");
    expenseForm.reset();
    toggleFields();
  });
});
</script>

</body>
</html>
